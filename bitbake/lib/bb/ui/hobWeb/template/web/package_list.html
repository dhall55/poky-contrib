<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>package-list</title>
<script type="text/javascript" src="/static/js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="/static/js/tabber.js"></script>
<link rel="stylesheet" type="text/css" href="/static/css/tabber.css"/>
<script type="text/javascript">
	function get_package_dependency(param,number){
		var is_checked = '';
		if($("#"+param).attr('checked')==undefined){
			is_checked=0;
		}else{
			is_checked=1;
		}
		var href = "/hob/get_package_dependency/?selected_package="+param+'&is_child='+number+'&is_checked='+is_checked;
		window.location = href;
	}
	function back_to_recipelist(){
		var href ="/hob/disp_recipes_tasks/";
		window.location = href;
	}
</script>
</head>
<body>
<form action="/hob/buildImage_request/" method="post">
<input type="hidden" name="selected_pkgTotal" value="{{ included_total }}"/>
<input type="hidden" name="selected_pkgSize" value="{{ pkg_size }}"/>
<div align="center" id="container">
  <table border="0" cellspacing="0" width="68%">
   <tbody>
   <tr>
    <td>
	<!-- context -->
	  <table border="0" cellspacing="0" width="100%" height="120px">
	     <tbody>
	       <tr bgcolor="#FCFCFC" height="60px">
	         <td align="left" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>Package selection</b></td>
	         <td align="right" width="50%">
	         	<b>Total packages:{{ packages_total }}</b><br/>
	         	<b>Packages included:{{ included_total }}</b><br/>
	         	<b>Selected packages size:{{ pkg_size }}MB</b><br/>
	         	<b>total image size:64MB</b>
	         </td>
	       </tr>
	       <tr height="100px" bgcolor="#FFFFFF">
	         <td colspan="2" align="left">
	         <div class="tabber" id="tab1">
				<div class="tabbertab">
					<h2><a name="tab1">Included (<b>{{ included_total }}</b>)</a></h2>
					<table border="1" cellspacing="0" width="96%" align="center">
					  <tbody>
					  <tr align="center">
					    <th>Id</th>
					    <th>Recipe name</th>
					    <th>Brought in by</th>
					    <th>Group</th>
					    <th>Included</th>
					  </tr>
					  {% for val in included_packages %}
					  <tr>
					    <td align="center" width="10%">{{ forloop.counter }}</td>
					    <td width="30%">{{ val.name }}</td>
					    <td width="30%">......</td>
					    <td width="20%">{{ val.group }}</td>
					    <td align="center" width="10%"><input type="checkbox" name="include_checkbox" value="{{ val.name }}" checked="checked"/></td>
					  </tr>
					  {% empty %}
					  <tr>
					    <td colspan="5"><font color="red">no data!</font></td>
					  </tr>
					  {% endfor %}
					  </tbody>
					</table>
				</div>
				<div class="tabbertab">
					<h2>All packages</h2>
					<table border="1" cellspacing="0" width="96%" align="center">
					  <tbody>
					  <tr align="center">
					    <th>Id</th>
					    <th>Package name</th>
					    <th>Size</th>
					    <th>Included</th>
					  </tr>
					  {% for val in parent_packages %}
					  <tr>
					    <td align="center" width="10%">{{ forloop.counter }}</td>
					    <td width="30%">{{ val.name }}</td>
					    <td width="30%"></td>
					    <td align="center" width="10%"><input type="checkbox" name="package_checkbox" id="{{ val.name }}" value="{{ val.name }}" {% if item.is_included %} checked="checked" {% endif %}  onclick="get_package_dependency(this.value,0)"/></td>
					  </tr>
					    {% for item in packages %}
					      {% ifequal item.pkg_parent val.name %}
					  <tr>
					    <td align="center" width="10%"></td>
					    <td width="30%">--->{{ item.name }}</td>
					    <td width="30%">{{ item.size }} KB</td>
					    <td align="center" width="10%"><input type="checkbox" name="package_checkbox" id="{{ item.name }}" value="{{ item.name }}" {% if item.is_included %} checked="checked" {% endif %}  onclick="get_package_dependency(this.value,1)"/></td>
					  </tr>
					      {% endifequal %}
					    {% endfor %}
					  {% empty %}
					  <tr>
					    <td colspan="4"><font color="red">no data!</font></td>
					  </tr>
					  {% endfor %}
					  </tbody>
					</table>
				</div>
	         </div>
	         </td>
	       </tr>
	       <tr>
	         <td align="center"><input type="button" name="Previous" value="Previous" onclick="back_to_recipelist()"/></td>
	         <td align="center"><input type="submit" name="Build image" value="Build image"/></td>
	       </tr>
	     </tbody>
	  </table>
    </td>
   </tr>
   </tbody>
  </table>
</div>
</form>
</body>
</html>
