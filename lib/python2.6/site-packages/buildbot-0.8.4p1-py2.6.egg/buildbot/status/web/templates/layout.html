{%- block doctype -%}
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
{% endblock %}
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    {% block head %}
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    {% if metatags %}
      {{ metatags }}
    {% endif %}
    {% if refresh %}
      <meta http-equiv="refresh" content="{{ refresh|e }}"/>
    {% endif %}
    <title>{{ pageTitle|e }}</title>
    <link rel="stylesheet" href="{{ stylesheet }}" type="text/css" />
    <link rel="alternate" type="application/rss+xml" title="RSS" href="{{ path_to_root }}rss">
    {% endblock %}

    <SCRIPT LANGUAGE="JavaScript">
         function getSelected(opt) {
            var selected = new Array();
            var index = 0;
            for (var intLoop = 0; intLoop < opt.length; intLoop++) {
               if ((opt[intLoop].selected) ||
                   (opt[intLoop].checked)) {
                  index = selected.length;
                  selected[index] = new Object;
                  selected[index].value = opt[intLoop].value;
                  selected[index].index = intLoop;
               }
            }
            return selected;
         }

         function grabImages(opt) {
            var sel = getSelected(opt);
            var strSel = new Array();
            for (var item in sel){
               strSel.push(sel[item].value);
            }   
            var form = window.parent.document.forms["force_build"];
            form.elements["property5value"].value = strSel.toString().replace(new RegExp( " ", "g" ), "").replace(new RegExp( ",", "g" ), "and"); 
         }
         function setBranch(opt) {
            var sel = getSelected(opt);
            var strSel = new Array();
            for (var item in sel){
               strSel.push(sel[item].value);
            }   
            var form = window.parent.document.forms["force_build"];
            if (strSel == "git://git.yoctoproject.org/poky")
            {
                form.elements["branch"].value = "master";
             }
            else if (strSel == "git://git.yoctoproject.org/poky-contrib")
            {
                form.elements["branch"].value = "stage/master_under_test";
            }
        }
        var counter = 0;
        var propcounter = 10

        function addInput(divName){
                counter++
                propcounter++
                var repodiv = document.createElement('div');
                repodiv.innerHTML = '<span class="label">Layer Git Repo:</span><span class="field"><input type="hidden" name="property"'+ propcounter +'"name" value="layer' + counter + 'repo" ></span><span class="field"><input type="text" name="property' + propcounter + 'value" value="git://git.yoctoproject.org/meta-intel"/></span>'
                document.getElementById(divName).appendChild(repodiv);

                propcounter++
                var branchdiv = document.createElement('div');
                branchdiv.innerHTML = '<span class="label">Layer Git Branch:</span><span class="field"><input type="hidden" name="property"'+ propcounter +'"name" value="layer' + counter + 'branch" ></span><span class="field"><input type="text" name="property' + propcounter + 'value" value="master"/></span>'
                document.getElementById(divName).appendChild(branchdiv);
                
                propcounter++
                var revdiv = document.createElement('div');
                revdiv.innerHTML = '<span class="label">Layer Git Revision or Tag:</span><span class="field"><input type="hidden" name="property"'+ propcounter +'"name" value="layer' + counter + 'revision" ></span><span class="field"><input type="text" name="property' + propcounter + 'value" value="HEAD"/></span>'
                document.getElementById(divName).appendChild(revdiv);
                
                
                propcounter++
                var workdirdiv = document.createElement('div');
                workdirdiv.innerHTML = '<span class="label">Layer Work Dir from Yocto Root:</span><span class="field"><input type="hidden" name="property"'+ propcounter +'"name" value="layer' + counter + 'workdir" ></span><span class="field"><input type="text" name="property' + propcounter + 'value" value="yocto/meta-intel"/></span>'
                document.getElementById(divName).appendChild(workdirdiv);

                
                propcounter++
                var prioritydiv = document.createElement('div');
                prioritydiv.innerHTML = '<span class="label">Layer Priority:</span><span class="field"><input type="hidden" name="property"'+ propcounter +'"name" value="layer' + counter + 'priority" ></span><span class="field"><input type="text" name="property' + propcounter + 'value" value="1"/></span>  <hr />'
                document.getElementById(divName).appendChild(prioritydiv);
                propcounter++

            }

 
 
    </script>



  </head>
  <body class="interface">
    {% block header -%}
    <div class="header">    
        <a href="{{ path_to_root or '.' }}">Home</a>
        - <a href="{{ path_to_root }}waterfall">Waterfall</a>
        <a href="{{ path_to_root }}grid">Grid</a>
        <a href="{{ path_to_root }}tgrid">T-Grid</a>
        <a href="{{ path_to_root }}console">Console</a>
        <a href="{{ path_to_root }}builders">Builders</a>
        <a href="{{ path_to_root }}one_line_per_build">Recent Builds</a>
        <a href="{{ path_to_root }}buildslaves">Buildslaves</a>
        <a href="{{ path_to_root }}changes">Changesources</a>
        - <a href="{{ path_to_root }}json/help">JSON API</a>
        - <a href="{{ path_to_root }}about">About</a>
    </div>
    {% endblock %}

    {%- block barecontent -%}
    <hr/>

    <div class="content">
      {%- block content -%}     
      {%- endblock -%}
    </div>
    {%- endblock -%}

    {%- block footer -%} 
    <div class="footer" style="clear:both">
      <hr/>
      <a href="http://buildbot.net/">BuildBot</a> ({{version}})
      {% if title -%}
        working for the&nbsp;
        {%- if title_url -%}
          <a href="{{ title_url }}">{{ title }}</a>
        {%- else -%}
          {{ title }}
        {%- endif -%}
        &nbsp;project.
      {%- endif -%}
      <br/>
      Page built: <b>{{ time }}</b> ({{ tz }})
    </div>
    {% endblock -%}
  </body>
</html>
